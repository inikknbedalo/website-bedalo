---
import { Image } from 'astro:assets';

interface Props {
  heading: string;
  content: string;
  profile?: {
    name: string;
    title: string;
    photo: ImageMetadata;
    photoAlt: string;
    link: string;
  };
}

const { heading, content, profile } = Astro.props;
const paragraphs = content.split('\n\n');
---

<div class="flex flex-col items-center gap-12 md:flex-row">
  {
    profile && (
      <div class="text-center md:w-1/3">
        <div class="mx-auto h-48 w-48 overflow-hidden rounded-full border-4 border-white shadow-lg md:h-64 md:w-64">
          <Image
            src={profile.photo}
            alt={profile.photoAlt}
            width={256}
            height={256}
            class="h-full w-full object-cover"
            loading="eager"
          />
        </div>
        <h3 class="mt-4 text-xl font-bold text-gray-800">{profile.name}</h3>
        <p class="text-gray-500">{profile.title}</p>
      </div>
    )
  }

  <div class:list={[profile ? 'md:w-2/3' : 'max-w-4xl mx-auto text-center']}>
    <h2 class="mb-6 text-3xl font-bold text-gray-800">
      {heading}
    </h2>
    <div class="space-y-4 leading-relaxed text-gray-600">
      {paragraphs.map((p) => <p>{p}</p>)}
    </div>
    {
      profile?.link && (
        <a
          href={profile.link}
          data-astro-prefetch
          class="mt-6 inline-block font-semibold text-blue-600 hover:underline"
        >
          Lihat Profil Lengkap & Sejarah Dusun â†’
        </a>
      )
    }
  </div>
</div>
