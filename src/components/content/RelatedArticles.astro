---
import type { CollectionEntry } from 'astro:content';
import { Image } from 'astro:assets';
import { formatDate } from '../../utils/format';

interface Props {
  articles: CollectionEntry<'berita'>[];
}

const { articles } = Astro.props;
---

{articles.length > 0 && (
  <div class="mt-12 rounded-lg border border-gray-200 bg-white p-6">
    <h3 class="mb-6 text-2xl font-bold text-gray-900">Artikel Terkait</h3>
    <div class="grid gap-4 md:grid-cols-3">
      {articles.map((article) => (
        <a
          href={`/berita/${article.id}`}
          data-astro-prefetch
          class="group flex gap-3 rounded-lg border border-gray-200 p-3 transition-colors hover:border-blue-600 hover:bg-blue-50"
        >
          <div class="h-20 w-20 flex-shrink-0 overflow-hidden rounded-lg bg-gray-200">
            <Image
              src={article.data.image}
              alt={article.data.imageAlt}
              class="h-full w-full object-cover transition-transform duration-300 group-hover:scale-110"
              widths={[80, 160]}
              sizes="80px"
            />
          </div>
          <div class="flex-1">
            <h4 class="mb-1 text-sm font-semibold text-gray-900 line-clamp-2 group-hover:text-blue-600">
              {article.data.title}
            </h4>
            <p class="text-xs text-gray-500">
              {formatDate(article.data.pubDate)}
            </p>
          </div>
        </a>
      ))}
    </div>
  </div>
)}
