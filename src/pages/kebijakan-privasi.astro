---
import MainLayout from '../layouts/MainLayout.astro';
import { getEntry } from 'astro:content';
import Card from '../components/ui/Card.astro';

const pageContent = await getEntry('pages', 'privacy-policy');

if (!pageContent || !('page' in pageContent.data) || pageContent.data.page !== 'privacy-policy') {
  throw new Error('Privacy policy content not found');
}

const { title, subtitle, lastUpdated, sections } = pageContent.data;
---

<MainLayout 
  title={`${title} | Website Dusun Bedalo`} 
  description={subtitle}
>
  <!-- Hero Section -->
  <section class="py-12 md:py-16">
    <div class="container mx-auto px-6">
      <div
        class="mx-auto max-w-3xl rounded-xl bg-gradient-to-br from-slate-600 to-gray-700 p-8 text-center text-white shadow-lg transition-all duration-300 hover:-translate-y-1 hover:scale-[1.03] hover:shadow-xl md:p-10"
        data-aos="fade-up"
      >
        <h1 class="mb-3 text-3xl font-bold md:text-4xl">
          {title}
        </h1>
        <p class="text-lg text-slate-200">
          {subtitle}
        </p>
        <p class="mt-2 text-xs text-slate-300">
          Terakhir diperbarui: {lastUpdated}
        </p>
      </div>
    </div>
  </section>

  <!-- Policy Content -->
  <section class="pb-12 md:pb-16">
    <div class="container mx-auto max-w-5xl px-6">
      {sections.map((section, index) => (
        <Card 
          variant="hover" 
          class="mb-8 border border-gray-100"
          data-aos="fade-up"
          data-aos-delay={index * 50}
        >
          <h2 class="mb-4 flex items-center gap-3 text-xl font-bold text-gray-900">
            <i class:list={[section.icon, 'text-2xl', `text-${section.iconColor}`]}></i>
            {section.title}
          </h2>
          <div class="prose max-w-none text-slate-600">
            {section.content.map((paragraph) => (
              <p set:html={paragraph}></p>
            ))}
            {section.list && (
              <ul class="mt-2 space-y-1 pl-5">
                {section.list.map((item) => (
                  <li>{item}</li>
                ))}
              </ul>
            )}
            {section.note && (
              <p class="mt-3" set:html={section.note}></p>
            )}
          </div>
        </Card>
      ))}
    </div>
  </section>
</MainLayout>
